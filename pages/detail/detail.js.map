{"version":3,"sources":["pages/detail/detail.js"],"names":["app","getApp","useUrl","require","Page","data","title","detailRules","imgUrls","waitInfo","restaurant","callPhone","wx","makePhoneCall","phoneNumber","photo","getShopAd","that","sId","obj2","url","serviceUrl","shop_ad","session_key","getStorageSync","s_id","success","res","length","index","push","thumb","setData","requestInfo","onLoad","e","obj","xiangqing","await","shop_info","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":";;AAAA;AACA,IAAMA,MAAMC,QAAZ;AACA,IAAMC,SAASC,QAAQ,qBAAR,CAAf;AACA;AACAC,KAAK;AACH;;;AAGAC,QAAM;AACJC,WAAO,QADH;AAEJC,iBAAa,uBAFT;AAGJC,aAAS,CACP,sEADO,EAEP,sEAFO,EAGP,sEAHO,CAHL;AAQJC,cAAU;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBQ,KARN;AAgCJC,gBAAY;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AAPU;AAhCR,GAJH;AA8CH;;;AAGAC,WAjDG,uBAiDU;AACXC,OAAGC,aAAH,CAAiB;AACfC,mBAAa,KAAKT,IAAL,CAAUK,UAAV,CAAqBK;AADnB,KAAjB;AAGD,GArDE;;AAsDH;;;AAGAC,WAzDG,qBAyDQC,IAzDR,EAyDcC,GAzDd,EAyDmB;AACpB,QAAIC,OAAO;AACTC,WAAKlB,OAAOmB,UAAP,CAAkBC,OADd;AAETjB,YAAM;AACJkB,qBAAaX,GAAGY,cAAH,CAAkB,aAAlB,CADT;AAEJC,cAAMP;AAFF,OAFG;AAMTQ,aANS,mBAMAC,GANA,EAMK;AACZ,YAAIA,IAAItB,IAAJ,CAASA,IAAT,CAAcuB,MAAd,KAAyB,CAA7B,EAAgC;AAChC,YAAIpB,UAAU,EAAd;AAFY;AAAA;AAAA;;AAAA;AAGZ,+BAAkBmB,IAAItB,IAAJ,CAASA,IAA3B,8HAAiC;AAAA,gBAAxBwB,KAAwB;;AAC/B;AACArB,oBAAQsB,IAAR,CAAaD,MAAME,KAAnB;AACD;AANW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOZd,aAAKe,OAAL,CAAa;AACXxB,mBAASA;AADE,SAAb;AAGD;AAhBQ,KAAX;AAkBAR,QAAIiC,WAAJ,CAAgBd,IAAhB;AACD,GA7EE;;AA8EH;;;AAGAe,QAjFG,kBAiFKC,CAjFL,EAiFQ;AACT;AACA;AACA,QAAIlB,OAAO,IAAX;AACA,QAAIC,MAAMiB,EAAEV,IAAZ;AACA,QAAIW,MAAM;AACRhB,WAAKlB,OAAOmB,UAAP,CAAkBgB,SADf;AAERhC,YAAM;AACJkB,qBAAaX,GAAGY,cAAH,CAAkB,aAAlB,CADT;AAEJC,cAAMP;AAFF,OAFE;AAMRQ,aANQ,mBAMCC,GAND,EAMM;AACZ;AACAV,aAAKe,OAAL,CAAa;AACXM,iBAAOX,IAAItB,IAAJ,CAASA,IAAT,CAAciC,KADV;AAEX5B,sBAAYiB,IAAItB,IAAJ,CAASA,IAAT,CAAckC;AAFf,SAAb;AAID;AAZO,KAAV;AAcAvC,QAAIiC,WAAJ,CAAgBG,GAAhB;AACA;AACAnB,SAAKD,SAAL,CAAeC,IAAf,EAAqBC,GAArB;AACD,GAvGE;;;AAyGH;;;AAGAsB,SA5GG,qBA4GQ;AACT;AACD,GA9GE;;;AAgHH;;;AAGAC,QAnHG,oBAmHO;AACR;AACD,GArHE;;;AAuHH;;;AAGAC,QA1HG,oBA0HO;AACR;AACD,GA5HE;;;AA8HH;;;AAGAC,UAjIG,sBAiIS;AACV;AACD,GAnIE;;;AAqIH;;;AAGAC,mBAxIG,+BAwIkB;AACnB;AACD;AA1IE,CAAL","file":"detail.js","sourcesContent":["// 获取全局应用程序实例对象\r\nconst app = getApp()\r\nconst useUrl = require('../../utils/service')\r\n// 创建页面实例对象\r\nPage({\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    title: 'detail',\r\n    detailRules: '听到叫号请到迎宾台，过号不作废，延三桌安排',\r\n    imgUrls: [\r\n      'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      'http://img06.tooopen.com/images/20160818/tooopen_sy_175866434296.jpg',\r\n      'http://img06.tooopen.com/images/20160818/tooopen_sy_175833047715.jpg'\r\n    ],\r\n    waitInfo: [\r\n      // {\r\n      //   kind: '餐桌类型',\r\n      //   desk: '等待桌数',\r\n      //   time: '预估时间'\r\n      // },\r\n      // {\r\n      //   kind: '小桌（1-2人）',\r\n      //   desk: '桌',\r\n      //   number: '1',\r\n      //   time: '--分钟'\r\n      // },\r\n      // {\r\n      //   kind: '中桌（3-4人）',\r\n      //   desk: '桌',\r\n      //   number: '1',\r\n      //   time: '--分钟'\r\n      // },\r\n      // {\r\n      //   kind: '大桌（5人以上）',\r\n      //   desk: '桌',\r\n      //   time: '--分钟'\r\n      // }\r\n    ],\r\n    restaurant: {\r\n      // img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      // name: '人马科技大饭堂',\r\n      // distance: '100',\r\n      // grade: 'four-star',\r\n      // address: '汇德商业大厦501',\r\n      // tel: '1361234567895',\r\n      // time: '10:00-22:00'\r\n    }\r\n  },\r\n  /**\r\n   * 拨打电话\r\n   */\r\n  callPhone () {\r\n    wx.makePhoneCall({\r\n      phoneNumber: this.data.restaurant.photo\r\n    })\r\n  },\r\n  /**\r\n   * 获取商店的轮播图\r\n   */\r\n  getShopAd (that, sId) {\r\n    let obj2 = {\r\n      url: useUrl.serviceUrl.shop_ad,\r\n      data: {\r\n        session_key: wx.getStorageSync('session_key'),\r\n        s_id: sId\r\n      },\r\n      success (res) {\r\n        if (res.data.data.length === 0) return\r\n        let imgUrls = []\r\n        for (var index of res.data.data) {\r\n          // console.log(index)\r\n          imgUrls.push(index.thumb)\r\n        }\r\n        that.setData({\r\n          imgUrls: imgUrls\r\n        })\r\n      }\r\n    }\r\n    app.requestInfo(obj2)\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad (e) {\r\n    // TODO: onLoad\r\n    // 获取对应商家的信息\r\n    let that = this\r\n    let sId = e.s_id\r\n    let obj = {\r\n      url: useUrl.serviceUrl.xiangqing,\r\n      data: {\r\n        session_key: wx.getStorageSync('session_key'),\r\n        s_id: sId\r\n      },\r\n      success (res) {\r\n        // console.log(res)\r\n        that.setData({\r\n          await: res.data.data.await,\r\n          restaurant: res.data.data.shop_info\r\n        })\r\n      }\r\n    }\r\n    app.requestInfo(obj)\r\n    // 获取商家轮播图\r\n    that.getShopAd(that, sId)\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady () {\r\n    // TODO: onReady\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow () {\r\n    // TODO: onShow\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide () {\r\n    // TODO: onHide\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload () {\r\n    // TODO: onUnload\r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh () {\r\n    // TODO: onPullDownRefresh\r\n  }\r\n})\r\n"]}