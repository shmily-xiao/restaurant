{"version":3,"sources":["pages/ordering/ordering.js"],"names":["app","getApp","useUrl","require","Page","data","title","quHaoNumber","star","restaurant","currentmenu","currentleftmenu","currentmenuid","scrollHeight","needDistance","scrollHeight2","showShopCarContent","showMask","menu1content","icon","chooseGoods","goods","money","allCount","deskNotice","e","console","log","detail","formId","goCheckOrder","that","wx","showToast","mask","order","getStorageSync","dishes","key","push","obj","url","serviceUrl","post_order","session_key","s_id","order_price","u_desc","user_desc","success","res","navigateTo","id","requestInfo","calculateMoney","menuList","menulist","singleMoney","goodsId","lists","list","goodsID","cai_price","showContent","setData","getCoupon","coupon","coupons_status","duration","coupons_detail","cou_id","setNeedDistance","length","choose","currentTarget","dataset","tab","leftChoose","menu","menulistid","getdesk","index","desk","quhao","size","code","numname","getQueue","quxiao","quxiao_queue","quxiaoId","menu1choose","tabmenu","fuwu","type","showModal","content","showCancel","callPhone","makePhoneCall","phoneNumber","photo","setNavigatorText","name","setNavigationBarTitle","addorder","goodsid","sid","confirmText","count","setStorageSync","delorder","obj2","queue","await","onLoad","shop_info","coupons","onReady","onShow","onHide","onUnload","onPullDownRefresh"],"mappings":";;AAAA;AACA,IAAMA,MAAMC,QAAZ;AACA,IAAMC,SAASC,QAAQ,qBAAR,CAAf;AACA;AACAC,KAAK;AACH;;;AAGAC,QAAM;AACJC,WAAO,UADH;AAEJC,iBAAa,MAFT;AAGJC,UAAM,CAAC,WAAD,EAAc,UAAd,EAA0B,UAA1B,EAAsC,YAAtC,EAAoD,WAApD,EAAiE,WAAjE,CAHF;AAIJC,gBAAY;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/QU,KAJR;AAqRJ;AACAC,iBAAa,CAtRT;AAuRJ;AACAC,qBAAiB,CAxRb;AAyRJ;AACAC,mBAAe,CA1RX;AA2RJ;AACAC,kBAAc,GA5RV;AA6RJC,kBAAc,CA7RV;AA8RJC,mBAAe,GA9RX;AA+RJC,wBAAoB,KA/RhB;AAgSJC,cAAU,KAhSN;AAiSJC,kBAAc,CACZ;AACEC,YAAM,sBADR;AAEEb,aAAO;AAFT,KADY,EAKZ;AACEa,YAAM,6BADR;AAEEb,aAAO;AAFT,KALY,EASZ;AACEa,YAAM,sBADR;AAEEb,aAAO;AAFT,KATY,EAaZ;AACEa,YAAM,sBADR;AAEEb,aAAO;AAFT,KAbY,CAjSV;AAmTJ;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACF;AACAc,iBAAa;AACX;AACA;AACAC,aAAO,EAHI;AAIX;AACAC,aAAO,CALI;AAMX;AACAC,gBAAU;AAPC;AAhWT,GAJH;AA8WH;;;AAGAC,YAjXG,sBAiXSC,CAjXT,EAiXY;AACbC,YAAQC,GAAR,CAAYF,EAAEG,MAAF,CAASC,MAArB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"ordering.js","sourcesContent":["// 获取全局应用程序实例对象\r\nconst app = getApp()\r\nconst useUrl = require('../../utils/service')\r\n// 创建页面实例对象\r\nPage({\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    title: 'ordering',\r\n    quHaoNumber: '立即取号',\r\n    star: ['zero-star', 'one-star', 'two-star', 'three-star', 'four-star', 'five-star'],\r\n    restaurant: {\r\n      // img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      // name: '人马科技大饭堂',\r\n      // id: 'remaid',\r\n      // address: '汇德商业大厦501',\r\n      // tel: '123412341234',\r\n      // status: '满桌',\r\n      // grade: 'four-star',\r\n      // gradeNumber: '4.8',\r\n      // comment: [\r\n      //   {\r\n      //     content: '服务态度好',\r\n      //     number: '932'\r\n      //   },\r\n      //   {\r\n      //     content: '食材新鲜',\r\n      //     number: '932'\r\n      //   },\r\n      //   {\r\n      //     content: '味道赞',\r\n      //     number: '932'\r\n      //   },\r\n      //   {\r\n      //     content: '一',\r\n      //     number: '9132'\r\n      //   },\r\n      //   {\r\n      //     content: '两个',\r\n      //     number: '9132'\r\n      //   },\r\n      //   {\r\n      //     content: '四个个字',\r\n      //     number: '9132'\r\n      //   },\r\n      //   {\r\n      //     content: '三个字',\r\n      //     number: '9132'\r\n      //   }\r\n      // ],\r\n      // menuList: [\r\n      //   {\r\n      //     title: '热销1',\r\n      //     id: 'list1',\r\n      //     list: [\r\n      //       {\r\n      //         img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //         name: '红烧牛肉1',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5',\r\n      //         id: 'list1_1'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉2',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5',\r\n      //         id: 'list1_2'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉3',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5',\r\n      //         id: 'list1_3'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉4',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5',\r\n      //         id: 'list1_4'\r\n      //       }\r\n      //     ]\r\n      //   },\r\n      //   {\r\n      //     title: '热销2',\r\n      //     id: 'list2',\r\n      //     list: [\r\n      //       {\r\n      //         img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //         name: '红烧牛肉1',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5',\r\n      //         id: 'list2_1'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉2',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5',\r\n      //         id: 'list2_2'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉3',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5',\r\n      //         id: 'list2_3'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉4',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5',\r\n      //         id: 'list2_4'\r\n      //       }\r\n      //     ]\r\n      //   },\r\n      //   {\r\n      //     title: '热销3',\r\n      //     id: 'list3',\r\n      //     list: [\r\n      //       {\r\n      //         img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //         name: '红烧牛肉1',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉2',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉3',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉4',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       }\r\n      //     ]\r\n      //   },\r\n      //   {\r\n      //     title: '热销4',\r\n      //     id: 'list4',\r\n      //     list: [\r\n      //       {\r\n      //         img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //         name: '红烧牛肉1',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉2',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉3',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉4',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       }\r\n      //     ]\r\n      //   },\r\n      //   {\r\n      //     title: '热销5',\r\n      //     id: 'list5',\r\n      //     list: [\r\n      //       {\r\n      //         img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //         name: '红烧牛肉1',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉2',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉3',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉4',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       }\r\n      //     ]\r\n      //   },\r\n      //   {\r\n      //     title: '热销6',\r\n      //     id: 'list6',\r\n      //     list: [\r\n      //       {\r\n      //         img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //         name: '红烧牛肉1',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉2',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉3',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉4',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       }\r\n      //     ]\r\n      //   },\r\n      //   {\r\n      //     title: '热销7',\r\n      //     id: 'list7',\r\n      //     list: [\r\n      //       {\r\n      //         img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //         name: '红烧牛肉1',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉2',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉3',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       },\r\n      //       {\r\n      //         name: '红烧牛肉4',\r\n      //         count: '1805',\r\n      //         good: '173',\r\n      //         price: '23.5'\r\n      //       }\r\n      //     ]\r\n      //   }\r\n      // ],\r\n      // coupon: {\r\n      //   id: 'code123123',\r\n      //   delmoney: 10,\r\n      //   condition: 100,\r\n      //   time: '2017-12-12'\r\n      // }\r\n    },\r\n    // 当前的tab\r\n    currentmenu: 0,\r\n    // 当前的left栏\r\n    currentleftmenu: 0,\r\n    // 侧边栏联动当前值\r\n    currentmenuid: 0,\r\n    // 设置scroll-view的高度\r\n    scrollHeight: 880,\r\n    needDistance: 0,\r\n    scrollHeight2: 815,\r\n    showShopCarContent: false,\r\n    showMask: false,\r\n    menu1content: [\r\n      {\r\n        icon: 'iconfont icon-canshi',\r\n        title: '催促上菜'\r\n      },\r\n      {\r\n        icon: 'iconfont icon-lingdang-copy',\r\n        title: '呼叫服务员'\r\n      },\r\n      {\r\n        icon: 'iconfont icon-mifen2',\r\n        title: '加米饭'\r\n      },\r\n      {\r\n        icon: 'iconfont icon-jiubei',\r\n        title: '加酒水'\r\n      }\r\n    ],\r\n    // comment: [\r\n      // {\r\n      //   username: '186****1234',\r\n      //   img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //   grade: 'five-star',\r\n      //   time: '2016-5-5',\r\n      //   userComment: ['味道不错挺好的的呀呀呀味道不错挺好的的呀呀呀味道不错挺好的的呀呀呀'],\r\n      //   commentImg: [\r\n      //     'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //     'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //     'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //     'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //     'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //     'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg'\r\n      //   ]\r\n      // },\r\n      // {\r\n      //   username: '186****1234',\r\n      //   img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //   grade: 'one-star',\r\n      //   time: '2016-5-5',\r\n      //   userComment: ['一', '一二', '一二三', '一二三四']\r\n      // },\r\n      // {\r\n      //   username: '186****1234',\r\n      //   img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //   grade: 'two-star',\r\n      //   time: '2016-5-5',\r\n      //   userComment: ['一', '一二', '一二三', '一二三四']\r\n      // },\r\n      // {\r\n      //   username: '186****1234',\r\n      //   img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //   grade: 'four-star',\r\n      //   time: '2016-5-5',\r\n      //   userComment: ['一二三四', '一', '一二三四', '一二', '一二三', '一二三四']\r\n      // },\r\n      // {\r\n      //   username: '186****1234',\r\n      //   img: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg',\r\n      //   grade: 'three-star',\r\n      //   time: '2016-5-5',\r\n      //   userComment: ['一二三四', '一', '一二三四', '一二', '一二三', '一二三四']\r\n      // }\r\n    // ],\r\n    chooseGoods: {\r\n      // 饭店id 选择后添加\r\n      // 选择的商品数量\r\n      goods: {},\r\n      // 总金额\r\n      money: 0,\r\n      // 总数\r\n      allCount: 0\r\n    }\r\n  },\r\n  /**\r\n   * 发送formId\r\n   */\r\n  deskNotice (e) {\r\n    console.log(e.detail.formId)\r\n    // todo 发送formId\r\n    // let obj = {\r\n    //   url: useUrl.serviceUrl.formId,\r\n    //   data: {\r\n    //     session_key: wx.getStorageSync('session_key'),\r\n    //     formId: e.detail.formId\r\n    //   }\r\n    // }\r\n    // app.requestInfo(obj)\r\n  },\r\n  /**\r\n   * 确认订单\r\n   */\r\n  goCheckOrder () {\r\n    let that = this\r\n    if (this.data.chooseGoods.allCount <= 0) {\r\n      return wx.showToast({\r\n        title: '您还没有点餐',\r\n        icon: 'success',\r\n        mask: true\r\n      })\r\n    }\r\n    // todo 提交订单信息，然后去到确认页面\r\n    let order = wx.getStorageSync('chooseGoods')\r\n    let dishes = []\r\n    // let dishes = order.goods\r\n    for (var key in order.goods) {\r\n      // console.log(item)\r\n      if (!(order.goods[key] === 0)) {\r\n        dishes.push([key, order.goods[key]])\r\n      }\r\n    }\r\n    // console.log(dishes)\r\n    let obj = {\r\n      url: useUrl.serviceUrl.post_order,\r\n      data: {\r\n        session_key: wx.getStorageSync('session_key'),\r\n        s_id: this.data.s_id,\r\n        order_price: order.money,\r\n        u_desc: this.data.user_desc || '无备注',\r\n        dishes: dishes\r\n      },\r\n      success (res) {\r\n        // console.log(res)\r\n        // todo 返回订单id\r\n        wx.navigateTo({\r\n          url: '../payorder/payorder?o_id=' + res.data.data.id + '&s_id=' + that.data.s_id\r\n        })\r\n      }\r\n    }\r\n    app.requestInfo(obj)\r\n  },\r\n  /**\r\n   * 计算消费金额\r\n   */\r\n  calculateMoney () {\r\n    let goods = this.data.chooseGoods.goods\r\n    let menuList = this.data.restaurant.menulist\r\n    let money = 0\r\n    let singleMoney = 0\r\n    for (var goodsId in goods) {\r\n      // console.log(goodsId)\r\n      // console.log(goods[goodsId])\r\n      for (var lists of menuList) {\r\n        // console.log(lists)\r\n        // 具体列表内的菜单\r\n        let list = lists.list\r\n        // console.log(list)\r\n        for (var goodsID of list) {\r\n          if (goodsID.id === goodsId) {\r\n            // console.log(goodsID.price)\r\n            // console.log(goods[goodsId])\r\n            singleMoney = goodsID.cai_price * goods[goodsId]\r\n            // console.log('success')\r\n          }\r\n          // return console.log(goodsID)\r\n        }\r\n      }\r\n      money += singleMoney\r\n    }\r\n    return money\r\n  },\r\n  /**\r\n   * 显示购物车内容\r\n   */\r\n  showContent () {\r\n    if (this.data.chooseGoods.money <= 0) return\r\n    this.setData({\r\n      showShopCarContent: !this.data.showShopCarContent,\r\n      showMask: !this.data.showMask\r\n    })\r\n  },\r\n  /**\r\n   * 获取优惠券\r\n   * @param e\r\n   */\r\n  getCoupon () {\r\n    if (this.data.coupon[0].coupons_status === 1) {\r\n      return wx.showToast({\r\n        title: '已领取优惠券',\r\n        icon: 'success',\r\n        duration: 2000,\r\n        mask: true\r\n      })\r\n    }\r\n    let obj = {\r\n      url: useUrl.serviceUrl.coupons_detail,\r\n      data: {\r\n        session_key: wx.getStorageSync('session_key'),\r\n        s_id: this.data.s_id,\r\n        cou_id: this.data.coupon[0].id\r\n      },\r\n      success () {\r\n        // console.log(res)\r\n        wx.showToast({\r\n          title: '领取优惠券成功',\r\n          icon: 'success',\r\n          duration: 2000,\r\n          mask: true\r\n        })\r\n      }\r\n    }\r\n    app.requestInfo(obj)\r\n  },\r\n  /**\r\n   * 设置右侧滚动栏的位置\r\n   */\r\n  setNeedDistance () {\r\n    if (this.data.coupon.length === 0 || this.data.coupon[0].coupons_status === 1) return\r\n    this.setData({\r\n      needDistance: 142\r\n    })\r\n  },\r\n  /**\r\n   * 改变menu选择\r\n   * @param e\r\n   */\r\n  choose (e) {\r\n    // console.log(e)\r\n    this.setData({\r\n      currentmenu: e.currentTarget.dataset.tab\r\n    })\r\n  },\r\n  /**\r\n   * 改变left menu选择\r\n   * @param e\r\n   */\r\n  leftChoose (e) {\r\n    this.setData({\r\n      currentleftmenu: e.currentTarget.dataset.menu,\r\n      currentmenuid: e.currentTarget.dataset.menulistid\r\n    })\r\n  },\r\n  /**\r\n   * 选择桌子取号\r\n   */\r\n  getdesk (e) {\r\n    let index = e.currentTarget.dataset.desk\r\n    // let title = null\r\n    let that = this\r\n    // if (index === '0') {\r\n    //   title = '小桌取号'\r\n    // } else if (index === '1') {\r\n    //   title = '中桌取号'\r\n    // } else {\r\n    //   title = '大桌取号'\r\n    // }\r\n    let obj = {\r\n      url: useUrl.serviceUrl.quhao,\r\n      data: {\r\n        session_key: wx.getStorageSync('session_key'),\r\n        s_id: that.data.s_id,\r\n        size: index * 1 + 1\r\n      },\r\n      success (res) {\r\n        // console.log(res)\r\n        let title = res.data.data\r\n        if (res.data.code === 200) {\r\n          that.setData({\r\n            quHaoNumber: res.data.data.numname\r\n          })\r\n          wx.showToast({\r\n            title: '取号成功!',\r\n            icon: 'success',\r\n            duration: 2000\r\n          })\r\n          // 获取取号信息\r\n          that.getQueue()\r\n          // let obj2 = {\r\n          //   url: useUrl.serviceUrl.queue,\r\n          //   data: {\r\n          //     session_key: wx.getStorageSync('session_key'),\r\n          //     s_id: e.s_id\r\n          //   },\r\n          //   success (res) {\r\n          //     console.log(res)\r\n          //     let quxiaoId = res.data.data.await.id\r\n          //     that.setData({\r\n          //       quxiaoId: quxiaoId\r\n          //     })\r\n          //   }\r\n          // }\r\n          // app.requestInfo(obj2)\r\n        } else {\r\n          wx.showToast({\r\n            title: title,\r\n            icon: 'success',\r\n            duration: 2000\r\n          })\r\n        }\r\n      }\r\n    }\r\n    app.requestInfo(obj)\r\n  },\r\n  /**\r\n   * 取消排队\r\n   */\r\n  quxiao () {\r\n    let that = this\r\n    let obj = {\r\n      url: useUrl.serviceUrl.quxiao_queue,\r\n      data: {\r\n        session_key: wx.getStorageSync('session_key'),\r\n        s_id: this.data.s_id,\r\n        id: this.data.quxiaoId\r\n      },\r\n      success (res) {\r\n        // console.log(res)\r\n        if (res.data.code === 200) {\r\n          let title = res.data.data\r\n          wx.showToast({\r\n            title: title,\r\n            icon: 'success',\r\n            duration: 2000\r\n          })\r\n          that.setData({\r\n            quHaoNumber: '立即取号'\r\n          })\r\n        } else {\r\n          wx.showToast({\r\n            title: '取消失败！',\r\n            icon: 'success',\r\n            duration: 2000\r\n          })\r\n        }\r\n      }\r\n    }\r\n    app.requestInfo(obj)\r\n    // console.log(1)\r\n  },\r\n  /**\r\n   * 户呼叫服务\r\n   * @param e\r\n   */\r\n  menu1choose (e) {\r\n    console.log(e.currentTarget.dataset.tabmenu)\r\n    let that = this\r\n    let obj = {\r\n      url: useUrl.serviceUrl.fuwu,\r\n      data: {\r\n        session_key: wx.getStorageSync('session_key'),\r\n        type: e.currentTarget.dataset.tabmenu * 1 + 1,\r\n        s_id: that.data.s_id\r\n      },\r\n      success (res) {\r\n        // console.log(res)\r\n        wx.showModal({\r\n          title: '呼叫服务',\r\n          content: res.data.data,\r\n          showCancel: false\r\n        })\r\n      }\r\n    }\r\n    app.requestInfo(obj)\r\n  },\r\n  /**\r\n   * 拨打电话\r\n   */\r\n  callPhone () {\r\n    wx.makePhoneCall({\r\n      phoneNumber: this.data.restaurant.photo\r\n    })\r\n  },\r\n  /**\r\n   * 修改标题栏文字\r\n   */\r\n  setNavigatorText () {\r\n    let that = this\r\n    let title = that.data.restaurant.name\r\n    wx.setNavigationBarTitle({\r\n      title: title\r\n    })\r\n  },\r\n  /**\r\n   * 添加商品\r\n   * @param e\r\n   */\r\n  addorder (e) {\r\n    let goodsId = e.currentTarget.dataset.goodsid\r\n    let sid = this.data.s_id\r\n    if (!goodsId) {\r\n      return wx.showModal({\r\n        title: '抱歉',\r\n        content: '您选的菜品暂时无法提供',\r\n        showCancel: false,\r\n        confirmText: '我知道了'\r\n      })\r\n    }\r\n    let chooseGoods = this.data.chooseGoods\r\n    let goods = chooseGoods.goods\r\n    let count = goods[goodsId]\r\n    chooseGoods.s_id = sid\r\n    // 已有该商品\r\n    if (count) {\r\n      goods[goodsId] = ++count\r\n    } else {\r\n      goods[goodsId] = 1\r\n    }\r\n    chooseGoods.goods = goods\r\n    this.setData({\r\n      chooseGoods: chooseGoods\r\n    })\r\n    let money = this.calculateMoney()\r\n    chooseGoods.money = money\r\n    // 增加计数\r\n    ++chooseGoods.allCount\r\n    this.setData({\r\n      chooseGoods: chooseGoods\r\n    })\r\n    wx.setStorageSync('chooseGoods', this.data.chooseGoods)\r\n  },\r\n  /**\r\n   * 删除商品\r\n   * @param e\r\n   */\r\n  delorder (e) {\r\n    let goodsId = e.currentTarget.dataset.goodsid\r\n    let chooseGoods = this.data.chooseGoods\r\n    let goods = chooseGoods.goods\r\n    let count = goods[goodsId]\r\n    goods[goodsId] = --count\r\n    chooseGoods.goods = goods\r\n    this.setData({\r\n      chooseGoods: chooseGoods\r\n    })\r\n    let money = this.calculateMoney()\r\n    chooseGoods.money = money\r\n    // 减少计数\r\n    --chooseGoods.allCount\r\n    if (chooseGoods.allCount <= 0) {\r\n      this.setData({\r\n        showMask: false,\r\n        showShopCarContent: false\r\n      })\r\n    }\r\n    this.setData({\r\n      chooseGoods: chooseGoods\r\n    })\r\n    wx.setStorageSync('chooseGoods', this.data.chooseGoods)\r\n  },\r\n  /**\r\n   * 获取取号信息\r\n   */\r\n  getQueue () {\r\n    // 获取取号信息\r\n    let that = this\r\n    let obj2 = {\r\n      url: useUrl.serviceUrl.queue,\r\n      data: {\r\n        session_key: wx.getStorageSync('session_key'),\r\n        s_id: that.data.s_id\r\n      },\r\n      success (res) {\r\n        // console.log(res)\r\n        if (!res.data.data.await) return\r\n        let quxiaoId = res.data.data.await.id\r\n        that.setData({\r\n          quxiaoId: quxiaoId\r\n        })\r\n      }\r\n    }\r\n    app.requestInfo(obj2)\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad (e) {\r\n    // TODO: onLoad\r\n    let that = this\r\n    // 获取商家信息\r\n    this.setData({\r\n      s_id: e.s_id\r\n    })\r\n    let obj = {\r\n      url: useUrl.serviceUrl.shop_info,\r\n      data: {\r\n        session_key: wx.getStorageSync('session_key'),\r\n        s_id: e.s_id\r\n      },\r\n      success (res) {\r\n        that.setData({\r\n          restaurant: res.data.data,\r\n          quHaoNumber: res.data.data.numname || '立即取号',\r\n          currentmenuid: res.data.data.menulist[0].id\r\n        })\r\n        // 改变标题栏文字\r\n        that.setNavigatorText()\r\n        // 获取取号信息\r\n        that.getQueue()\r\n        // let obj2 = {\r\n        //   url: useUrl.serviceUrl.queue,\r\n        //   data: {\r\n        //     session_key: wx.getStorageSync('session_key'),\r\n        //     s_id: e.s_id\r\n        //   },\r\n        //   success (res) {\r\n        //     console.log(res)\r\n        //     let quxiaoId = res.data.data.await.id\r\n        //     that.setData({\r\n        //       quxiaoId: quxiaoId\r\n        //     })\r\n        //   }\r\n        // }\r\n        // app.requestInfo(obj2)\r\n        // console.log(res)\r\n      }\r\n    }\r\n    app.requestInfo(obj)\r\n    // 获取商家优惠券\r\n    let obj2 = {\r\n      url: useUrl.serviceUrl.coupons,\r\n      data: {\r\n        session_key: wx.getStorageSync('session_key'),\r\n        s_id: e.s_id\r\n      },\r\n      success (res) {\r\n        // console.log(res)\r\n        that.setData({\r\n          coupon: res.data.data || []\r\n        })\r\n        that.setNeedDistance()\r\n      }\r\n    }\r\n    app.requestInfo(obj2)\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady () {\r\n    // TODO: onReady\r\n\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow () {\r\n    // TODO: onShow\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide () {\r\n    // TODO: onHide\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload () {\r\n    // TODO: onUnload\r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh () {\r\n    // TODO: onPullDownRefresh\r\n  }\r\n})\r\n"]}